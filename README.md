# Учебный проект: API проекта "YaMDb"

# Статус работы workflow

![example workflow](https://github.com/arche-ma/yamdb_final/actions/workflows/yamdb_workflow.yml/badge.svg)


# Проект YaMDb
Проект YaMDb собирает отзывы (Review) пользователей на произведения (Title). Произведения делятся на категории: «Книги», «Фильмы», «Музыка». Список категорий (Category) может быть расширен (например, можно добавить категорию «Спорт» или «Видеоигры»).
 
В каждой категории есть произведения: книги, фильмы или музыка. Например, в категории «Книги» могут быть произведения «Война и мир» и «451 градус по Фаренгейту», а в категории «Музыка» — песня «Всё в порядке» исполнителя «DK» или песня «Come As You Are» группы «Nirvana». Произведению может быть присвоен жанр из списка предустановленных (например, «Электронная музыка», «Рок» или «Классическая музыка»). Новые жанры может создавать только администратор.
 
Читатели могут оставить к произведениям текстовые отзывы (Review) и выставить произведению рейтинг (оценку в диапазоне от 1 до 10). Из множества оценок автоматически высчитывается средняя оценка произведения.

## Авторы проекта
Луговик Сергей (@arche-ma), Айдар Минибаев (@Minibaev), Марат Зиев( 
@Cocok-ylitki)
 
## Техническое описание проекта YaMDb
Вам доступен репозиторий api_yamdb. К проекту по адресу /redoc подключена документация API YaMDb. В ней описаны шаблоны запросов к API и структура ожидаемых ответов. Для каждого запроса указаны уровни прав доступа: пользовательские роли, которым разрешён запрос.
 
*запросы к API начинаются с `/api/v1/`*
 
### Пользовательские роли
 
* **Аноним** — может просматривать описания произведений, читать отзывы и комментарии.
* **Аутентифицированный пользователь (user)**— может читать всё, как и Аноним, дополнительно может публиковать отзывы и ставить рейтинг произведениям, может комментировать чужие отзывы и ставить им оценки; может редактировать и удалять свои отзывы и комментарии.
* **Модератор (moderator)** — те же права, что и у Аутентифицированного пользователя плюс право удалять любые отзывы и комментарии.
* **Администратор (admin)** — полные права на управление проектом и всем его содержимым. Может создавать и удалять произведения, категории и жанры. Может назначать роли пользователям.
* **Администратор Django** — те же права, что и у роли Администратор.

## Заполнение файла .env
Файл .env должен находиться в директории infra. В нем содержатся следующие ключи:
DB_ENGINE=django.db.backends.postgresql
DB_NAME=**название базы данных**
POSTGRES_USER=**имя пользователя**
POSTGRES_PASSWORD=**пользовательский пароль**
DB_HOST=db
DB_PORT=5432

## Заполнение базы данных
Базу данных можно восстановить из дампа с помощью команды
```$ python manage.py loaddata #имя файла с дампом# ```


## Установка 
Клонируем репозиторий на локальную машину:
 
```$ git clone https://github.com/arche-ma/api_yamdb.git```
 
 Создаем виртуальное окружение:
 
 ```$ python -m venv venv```
 
 Устанавливаем зависимости:
 
```$ pip install -r requirements.txt```
 
Создание и применение миграций:
 
```$ python manage.py makemigrations``` и ```$ python manage.py migrate```
 
Запускаем django сервер:
 
```$ python manage.py runserver```
 
Все готово к использованию API!
 
 
### Доступные методы:
метод                                                         | GET | POST | PUT | PATCH | DEL |
--------------------------------------------------------------|-----|------|-----|-------|-----|
/api/v1/auth/singup/ | - | V | - | - | - |
/api/v1/auth/token/| - | V | - | - | - |
/api/v1/titles/ | V | V | - | - | - |
/api/v1/titles/{titles_id}/ | V | - | - | V | V |
/api/v1/titles/{title_id}/reviews/  | V | V | - | - | - |
/api/v1/titles/{title_id}/reviews/{review_id}/ | V | - | - | V | V |
/api/v1/titles/{title_id}/reviews/{review_id}/comments/ | V | V | - | - | - |
/api/v1/titles/{title_id}/reviews/{review_id}/comments/{comment_id}/ | V | - | - | V | V |
/api/v1/users/ | V | V | - | - | - |
/api/v1/users/{username}/ | V | - | - | V | V |
/api/v1/categories/ | V | V | - | - | - |
/api/v1/categories/{slug}/ | - | - | - | - | V |
/api/v1/genres/ | V | V | - | - | - |
/api/v1/genres/{slug}/ | - | - | - | - | V |
